
<!DOCTYPE html>
<html>
<head>
  <title>Pulpasoni</title>
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="assets/css/owl.carousel.css">
  <link rel="stylesheet" type="text/css" href="assets/css/styles.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body>

  <!-- Navbar -->
<div class="nav-side-menu">
    <div class="brand">GUSRESORT</div>
    <i class="fa fa-bars fa-2x toggle-btn" data-toggle="collapse" data-target="#menu-content"></i>
        <div class="menu-list">
          <ul id="menu-content" class="menu-content collapse out">
              <li onclick="location.href='home.html'">
                  <i class="fa fa-dashboard fa-lg"></i> Hotel Villa Luz 
              </li>
              
              <li onclick="location.href='rooms.html'">  
                <i class="material-icons text-center icon-30">hotel</i>
                <div> Habitaciones </div>
              </li>

              <li  onclick="location.href='restaurant-bar.html'">  
                <i class="material-icons text-center icon-30">shopping_cart</i>
                <div>Restaurante/Bar </div>
              </li>

              <li onclick="location.href='clients.html'">
                  <i class="material-icons text-center icon-30">supervisor_account</i>
                  <div>Clientes</div> 
              </li>

              <li data-toggle="collapse" data-target="#promotions" class="collapsed">
                <i class="material-icons text-center icon-30">contact_mail</i>
                <div><a href="fidelization.html">Fidelización</a></div> 
              </li>  
              <ul class="sub-menu collapse" id="promotions">
                <li>General</li>
                <li>Temporada</li>
                <li>Especial</li>
              </ul>

              <li onclick="location.href='planes.html'">
                  <i class="material-icons text-center icon-30">event</i>
                  <div>Planes</div> 
              </li>

              <li onclick="location.href='aditional_services.html'">  
                <i class="material-icons text-center icon-30">add_to_photos</i>
                <div>Servicios Adicionales</div>
              </li>

              <li onclick="location.href='configuration.html'">  
                <i class="material-icons text-center icon-30">settings</i>
                <div>Configuración</div>
              </li>
          </ul>
     </div>
</div>

<div class="nav-profile">
 <div class="col-md-12"> 
    <div class="profile">
      <i class="material-icons text-center">person_pin</i>
       <span class="user">José Pedraza</span>
       <i class="material-icons text-center">exit_to_app</i>
    </div>
  </div>
</div>


  <!-- dashboard -->
  <div class="container-fluid dashboard">
      <h3>Habitaciones</h3>
      <hr>
      <div class="rooms">
          <div class="row">

            <div class="col-md-12">
              <div class="col-xs-2 col-sm-3 col-md-1 room type_room1" data-state="empty" data-type_room="clasica" 
                  data-value_person="50000" data-value_junior="30000">
                  <div class="col-md-12 title_rom">Clasica</div>
                  <div class="num text-center">101</div>
              </div>

              <div class="col-xs-2 col-sm-3 col-md-1 room type_room1" data-state="empty" data-type_room="clasica" 
                  data-value_person="50000" data-value_junior="30000">
                  <div class="col-md-12 title_rom">Clasica</div>
                  <div class="num text-center">101</div>
              </div>

              <div class="col-xs-2 col-sm-3 col-md-1 room type_room1" data-state="empty" data-type_room="clasica" 
                  data-value_person="50000" data-value_junior="30000">
                  <div class="col-md-12 title_rom">Clasica</div>
                  <div class="num text-center">101</div>
              </div>

              <div class="col-xs-2 col-sm-3 col-md-1 room type_room1" data-state="empty" data-type_room="clasica" 
                  data-value_person="50000" data-value_junior="30000">
                  <div class="col-md-12 title_rom">Clasica</div>
                  <div class="num text-center">101</div>
              </div>

              <div class="col-xs-2 col-sm-3 col-md-1 room type_room1" data-state="empty" data-type_room="clasica" 
                  data-value_person="50000" data-value_junior="30000">
                  <div class="col-md-12 title_rom">Clasica</div>
                  <div class="num text-center">101</div>
              </div>

              <div class="col-xs-2 col-sm-3 col-md-1 room type_room1" data-state="empty" data-type_room="clasica" 
                  data-value_person="50000" data-value_junior="30000">
                  <div class="col-md-12 title_rom">Clasica</div>
                  <div class="num text-center">101</div>
              </div>

              <div class="col-xs-2 col-sm-3 col-md-1 room type_room1" data-state="empty" data-type_room="clasica"
                 data-value_person="50000" data-value_junior="30000">
                  <div class="col-md-12 title_rom">Clasica</div>
                  <div class="num text-center">102</div>
              </div>

              <div class="col-xs-2 col-sm-3 col-md-1 room type_room1" data-state="full" data-type_room="clasica"
                  data-value_person="50000" data-value_junior="30000">
                  <div class="col-md-12 title_rom">Clasica</div>
                  <div class="num text-center">103</div>
                  <div class="full" title="Ocupado"><i class="material-icons icon-48">lock</i></div>
              </div>

              <div class="col-xs-2 col-sm-3 col-md-1 room type_room2" data-state="empty" data-type_room="superior"
                  data-value_person="70000" data-value_junior="35000">
                  <div class="col-md-12 title_rom">Superior</div>
                  <div class="num text-center">104</div>
              </div>

              <div class="col-xs-2 col-sm-3 col-md-1 room type_room2" data-state="empty" data-type_room="superior"
                  data-value_person="70000" data-value_junior="35000">
                  <div class="col-md-12 title_rom">Superior</div>
                  <div class="num text-center">104</div>
              </div>

              <div class="col-xs-2 col-sm-3 col-md-1 room type_room2" data-state="empty" data-type_room="superior"
                  data-value_person="70000" data-value_junior="35000">
                  <div class="col-md-12 title_rom">Superior</div>
                  <div class="num text-center">104</div>
              </div>

              <div class="col-xs-2 col-sm-3 col-md-1 room type_room2" data-state="empty" data-type_room="superior"
                  data-value_person="70000" data-value_junior="35000">
                  <div class="col-md-12 title_rom">Superior</div>
                  <div class="num text-center">104</div>
              </div>

              <div class="col-xs-2 col-sm-3 col-md-1 room type_room2" data-state="empty" data-type_room="superior"
                  data-value_person="70000" data-value_junior="35000">
                  <div class="col-md-12 title_rom">Superior</div>
                  <div class="num text-center">104</div>
              </div>

              <div class="col-xs-2 col-sm-3 col-md-1 room type_room2" data-state="empty" data-type_room="superior"
                  data-value_person="70000" data-value_junior="35000">
                  <div class="col-md-12 title_rom">Superior</div>
                  <div class="num text-center">104</div>
              </div>

              <div class="col-xs-2 col-sm-3 col-md-1 room type_room2" data-state="empty" data-type_room="superior"
                  data-value_person="70000" data-value_junior="35000">
                  <div class="col-md-12 title_rom">Superior</div>
                  <div class="num text-center">104</div>
              </div>

              <div class="col-xs-2 col-sm-3 col-md-1 room type_room2" data-state="empty" data-type_room="superior"
                  data-value_person="70000" data-value_junior="35000">
                  <div class="col-md-12 title_rom">Superior</div>
                  <div class="num text-center">104</div>
              </div>


              <div class="col-xs-2 col-sm-3 col-md-1 room type_room2" data-state="empty" data-type_room="superior"
                  data-value_person="70000" data-value_junior="35000">
                  <div class="col-md-12 title_rom">Superior</div>
                  <div class="num text-center">104</div>
              </div>

              <div class="col-xs-2 col-sm-3 col-md-1 room type_room2" data-state="empty" data-type_room="superior"
                  data-value_person="70000" data-value_junior="35000">
                  <div class="col-md-12 title_rom">Superior</div>
                  <div class="num text-center">104</div>
              </div>

              <div class="col-xs-2 col-sm-3 col-md-1 room type_room2" data-state="empty" data-type_room="superior"
                  data-value_person="70000" data-value_junior="35000">
                  <div class="col-md-12 title_rom">Superior</div>
                  <div class="num text-center">104</div>
              </div>

              <div class="col-xs-2 col-sm-3 col-md-1 room type_room3" data-state="full" data-type_room="ejecutiva"
                  data-value_person="100000" data-value_junior="40000">
                  <div class="col-md-12 title_rom">Ejecutiva</div>
                  <div class="num text-center">105</div>
                  <div class="full" title="Ocupado"><i class="material-icons icon-48">lock</i></div>
              </div>

              <div class="col-xs-2 col-sm-3 col-md-1 room type_room3" data-state="empty" data-type_room="ejecutiva"
                  data-value_person="100000" data-value_junior="40000">
                  <div class="col-md-12 title_rom">Ejecutiva</div>
                  <div class="num text-center">105</div>
              </div>

              <div class="col-xs-2 col-sm-3 col-md-1 room type_room3" data-state="full" data-type_room="ejecutiva"
                  data-value_person="100000" data-value_junior="40000">
                  <div class="col-md-12 title_rom">Ejecutiva</div>
                  <div class="num text-center">105</div>
                  <div class="full" title="Ocupado"><i class="material-icons icon-48">lock</i></div>
              </div>

              <div class="col-xs-2 col-sm-3 col-md-1 room type_room3" data-state="full" data-type_room="ejecutiva"
                  data-value_person="100000" data-value_junior="40000">
                  <div class="col-md-12 title_rom">Ejecutiva</div>
                  <div class="num text-center">105</div>
                  <div class="full" title="Ocupado"><i class="material-icons icon-48">lock</i></div>
              </div>

              <div class="col-xs-2 col-sm-3 col-md-1 room type_room3" data-state="empty" data-type_room="ejecutiva"
                  data-value_person="100000" data-value_junior="40000">
                  <div class="col-md-12 title_rom">Ejecutiva</div>
                  <div class="num text-center">105</div>
              </div>

              <div class="col-xs-2 col-sm-3 col-md-1 room type_room3" data-state="empty" data-type_room="ejecutiva"
                  data-value_person="100000" data-value_junior="40000">
                  <div class="col-md-12 title_rom">Ejecutiva</div>
                  <div class="num text-center">105</div>
              </div>

              <div class="col-xs-2 col-sm-3 col-md-1 room type_room3" data-state="empty" data-type_room="ejecutiva"
                  data-value_person="100000" data-value_junior="40000">
                  <div class="col-md-12 title_rom">Ejecutiva</div>
                  <div class="num text-center">105</div>
              </div>

              <div class="col-xs-2 col-sm-3 col-md-1 room type_room3" data-state="full" data-type_room="ejecutiva"
                  data-value_person="100000" data-value_junior="40000">
                  <div class="col-md-12 title_rom">Ejecutiva</div>
                  <div class="num text-center">105</div>
                  <div class="full" title="Ocupado"><i class="material-icons icon-48">lock</i></div>
              </div>

           </div>
        </div>
      </div>
  </div>


  <!-- Modal room empty -->
  <div class="modal fade" id="modal-room-empty" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title title-room-modal text-center"></h4>
        </div>
        <div class="modal-body">
          <div class="row form_room">
              <form class="col-md-12" method="post">
                   <div class="col-xs-12 col-md-6 form-group">
                     <label for="name">Nombres y Apellidos</label>
                     <input type="text" class="form-control" id="name" placeholder="Ingrese nombre completo">
                   </div>
                  
                    <div class="col-xs-12 col-md-6 form-group">
                      <label for="document">Documento</label>
                      <input type="text" class="form-control" id="document" placeholder="Ingrese identificación">
                    </div>

                    <div class="col-xs-12 col-md-6 form-group">
                     <label for="telephone">Teléfono fijo</label>
                     <input type="text" class="form-control" id="telephone" placeholder="Número fijo">
                   </div>

                   <div class="col-xs-12 col-md-6 form-group">
                     <label for="cellphone">Celular</label>
                     <input type="text" class="form-control" id="cellphone" placeholder="Número movil">
                   </div>

                   <div class="col-xs-12 col-md-6 form-group">
                     <label for="date_open">Fecha Entrada</label>
                     <input type="text" class="form-control" id="date_open" value="21/09/2017">
                   </div>

                   <div class="col-xs-12 col-md-6 form-group">
                     <label for="date_exit">Fecha Salida</label>
                     <input type="text" class="form-control" id="date_exit" value="22/09/2017">
                   </div>

                   <div class="col-xs-12 col-md-3 form-group">
                     <label for="adults">Adultos</label>
                     <input type="num" class="form-control" id="adults"  value="1">
                   </div>

                   <div class="col-xs-12 col-md-3 form-group">
                     <label for="junior">Niños</label>
                     <input type="text" class="form-control" id="junior" value="0">
                   </div>

                   <div class="col-xs-12 col-md-6 form-group">
                     <label for="email">Correo Electrónico</label>
                     <input type="email" class="form-control" id="email" placeholder="example@gmail.com">
                   </div>

                   <div class="col-xs-12 col-md-6 form-group">
                     <label for="descuent">Descuento</label>
                     <input type="text" class="form-control" id="descuent" placeholder="Valor a descontar" value="">
                   </div>

                   <div class="col-xs-12 col-md-6 form-group text-center">
                     <label id="total" class="total">$0</label>
                   </div>

              </form>
          </div>
          
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-primary">Reservar habitación </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal room full -->
  <div class="modal fade" id="modal-room-full" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title title-room-modal text-center"></h4>
        </div>
        <div class="modal-body">
            <div class="row">
              <div class="col-md-8 col-md-offset-2 text-center">
                  <label>Nombre:</label> <span>José Fernando Pedraza Sandoval</span> <br>
                  <label>C.C:</label> <span>1022968217</span> <br>
                  <label>Teléfono:</label> <span>7862534</span> <br>
                  <label>Celular:</label> <span>3107862534</span> <br>
                  <label>Fecha Entrada:</label> <span>20/09/2017</span> <br>
                  <label>Fecha Salida:</label> <span>23/09/2017</span> <br>
                  <label>Total noches:</label> <span>2 noches</span> <br>
                  <label>Saldo pendiente:</label> <span class="total_saldo">$250000</span> <br>
              </div>
            </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-primary">Desocupar Habitación </button>
        </div>
      </div>
    </div>
  </div>

</div> 
  
  


</body>
<link rel="stylesheet" type="text/css" href="assets/css/jquery-ui.min.css">
<script src="assets/js/jquery-1.11.0.min.js" ></script>
<script src="assets/js/bootstrap.min.js" ></script>
<script src="assets/js/owl.carousel.js" ></script>
<script src="assets/js/jquery-ui.min.js" ></script>
<script>
    $(document).ready(function(){

      var hoy = new Date();

      $("#date_open" ).datepicker({
        changeMonth: true,
        changeYear: true,
        dateFormat: 'dd/mm/yy',
        minDate: hoy
      });
      $("#date_exit" ).datepicker({
        changeMonth: true,
        changeYear: true,
        dateFormat: 'dd/mm/yy',
        minDate: hoy
      });

      var state = '';
      var type_room = '';
      var value_person = 0;
      var value_junior = 0;
      var date_open = null,date_exit = null,cant_adults = null,cant_junior = null,noches = null;
    

      $(".rooms .room").each(function(){
        $(this).click(function(){
          /*General config*/
          $("#modal-room-empty #total").html("$0");

          state = ($(this)[0].dataset.state);
          type_room = ($(this)[0].dataset.type_room);
          value_person = parseInt($(this)[0].dataset.value_person);
          value_junior = parseInt($(this)[0].dataset.value_junior);
          date_open = $("#date_exit").val();
          date_exit = $("#date_open").val();
          noches =  resta_dates(date_exit,date_open);
          cant_adults = parseInt($("#adults").val());
          cant_junior = ($("#junior").val());
          descuent = 0;

          update_total(value_person,value_junior,noches,cant_adults,cant_junior,descuent);
          

          if(state == "empty"){
            $("#modal-room-empty").modal("show");
            $(".title-room-modal").html("Habitación "+type_room);

            $("#date_open").change(function(event) {
               date_open = $("#date_exit").val();
               date_exit = $("#date_open").val();
               noches =  resta_dates(date_exit,date_open);
               update_total(value_person,value_junior,noches,cant_adults,cant_junior,descuent);
            }); 

            $("#date_exit").change(function(event) {
               date_open = $("#date_exit").val();
               date_exit = $("#date_open").val();
               noches =  resta_dates(date_exit,date_open);
               update_total(value_person,value_junior,noches,cant_adults,cant_junior,descuent);
            }); 

            $("#adults").blur(function(event) {
              cant_adults = parseInt($("#adults").val());
              update_total(value_person,value_junior,noches,cant_adults,cant_junior,descuent);
            });

            $("#junior").blur(function(event) {
              cant_junior = ($("#junior").val());
              update_total(value_person,value_junior,noches,cant_adults,cant_junior,descuent);
            });

            $("#descuent").blur(function(event) {
              descuent = ($("#descuent").val());
              update_total(value_person,value_junior,noches,cant_adults,cant_junior,descuent);
            });


          }else if(state == "full"){
            $("#modal-room-full").modal("show");
            $(".title-room-modal").html("Habitación "+type_room);
          }
         
        });
      })

      function update_total(value_person,value_junior,noches,cant_adults,cant_junior,descuent){
        
        if(noches < 0){ noches = 0;}
        if(noches != null && (cant_adults != null || cant_junior != null)){
          var total = (cant_adults * noches * value_person) + (cant_junior * noches * value_junior);
          total = total - descuent;
          $("#total").html("$"+total);  
        }
      }

      function resta_dates(f1, f2){
          var aFecha1 = f1.split('/');
          var aFecha2 = f2.split('/');
          var fFecha1 = Date.UTC(aFecha1[2], aFecha1[1] - 1, aFecha1[0]);
          var fFecha2 = Date.UTC(aFecha2[2], aFecha2[1] - 1, aFecha2[0]);
          var dif = fFecha2 - fFecha1;
          return Math.floor(dif / (1000 * 60 * 60 * 24));
      }      

    });
    
</script>
</html>